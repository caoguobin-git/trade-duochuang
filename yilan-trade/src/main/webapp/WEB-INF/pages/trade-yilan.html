<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>
        Title</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>

</head>
<body>
<button id="loginFXCM">
    登录福汇
</button>
<button id="getMarketDataSnapshot">
    获取市场数据
</button>
<button id="createMarketOrder">
    创建市价单
</button>
<button id="createSLMarketOrder">
    为市价单设置止盈止损
</button>
<button id="updateSLMarketOrder">
    更改仓位的止盈止损
</button>
<button id="deleteSLMarketOrder">
    删除仓位的止盈止损
</button>
<button id="deleteMarketOrder">
    对某个仓位进行平仓
</button>
<button id="deleteAllOpenPositions">
    全部平仓
</button>
<button id="createEntryOrder">
    创建挂单
</button>
<button id="updateEntryOrder">
    更改挂单
</button>
<button id="deleteEntryOrder">
    删除挂单
</button>
<button id="deleteAllEntryOrders">
    删除所有挂单
</button>
<button id="createSLEntryOrder">
    为挂单设置止盈/止损
</button>
<button id="updateSLEntryOrder">
    修改挂单止盈/止损
</button>
<button id="deleteSLEntryOrder">
    删除挂单的止盈/止损
</button>
<button id="getOpenPositions">
    获取开仓位置
</button>
<button id="getOpenOrders">
    获取所有订单
</button>
<button id="getClosedPositions">
    获取已平仓位置
</button>
<button id="test">test</button>
</body>
</html>
<script>
    $(function () {
        $("#loginFXCM").click(loginFXCM)
        $("#getMarketDataSnapshot").click(getMarketDataSnapshot)
        $("#createMarketOrder").click(createMarketOrder)
        $("#createSLMarketOrder").click(createSLMarketOrder)
        $("#updateSLMarketOrder").click(updateSLMarketOrder)
        $("#deleteSLMarketOrder").click(deleteSLMarketOrder)
        $("#deleteMarketOrder").click(deleteMarketOrder)
        $("#deleteAllOpenPositions").click(deleteAllOpenPositions)
        $("#createEntryOrder").click(createEntryOrder)
        $("#updateEntryOrder").click(updateEntryOrder)
        $("#deleteEntryOrder").click(deleteEntryOrder)
        $("#deleteAllEntryOrders").click(deleteAllEntryOrders)
        $("#createSLEntryOrder").click(createSLEntryOrder)
        $("#updateSLEntryOrder").click(updateSLEntryOrder)
        $("#deleteSLEntryOrder").click(deleteSLEntryOrder)
        $("#getOpenPositions").click(getOpenPositions)
        $("#getOpenOrders").click(getOpenOrders)
        $("#getClosedPositions").click(getClosedPositions)
        $("#test").click(test)

    })


    function test() {
        var a ="247F1A35FCA49D6443B489951AA1B877";
        var b=701116547;
        console.log(a+b)
    }

    function getMarketDataSnapshot() {
        var url="/trade/getMarketDataSnapshot.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547
        }
        sendFxcmRequest(url,param)
    }

    function getClosedPositions() {
        var url="/trade/getClosedPositions.do"
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547
        }
        sendFxcmRequest(url,param)
    }

    function getOpenOrders() {
        var url="/trade/getOpenOrders.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547
        }
        sendFxcmRequest(url,param)
    }

    function getOpenPositions() {
        var url="/trade/getOpenPositions.do"
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547
        }
        sendFxcmRequest(url,param)
    }

    function deleteSLEntryOrder() {
        var url="/trade/deleteSLEntryOrder.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547,
            "orderId":104563467,
            "type":"limit"
        }
        sendFxcmRequest(url,param)
    }

    function updateSLEntryOrder() {
        var url="/trade/updateSLEntryOrder.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547,
            "orderId":104563467,
            "type":"limit",
            "price":1.15
        }
        sendFxcmRequest(url,param)
    }

    function createSLEntryOrder() {
        var url="/trade/createSLEntryOrder.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547,
            "orderId":104563452,
            "type":"stop",
            "price":0.95
        }
        sendFxcmRequest(url,param)
    }

    function deleteAllEntryOrders() {
        var url="/trade/deleteAllEntryOrders.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547
        }
        sendFxcmRequest(url,param)
    }

    function deleteEntryOrder() {
        var url="/trade/deleteEntryOrder.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547,
            "orderId":104562911
        }
        sendFxcmRequest(url,param)
    }
    function updateEntryOrder() {
        var url="/trade/updateEntryOrder.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547,
            "orderId":104562911,
            "amount":1000,
            "price":1.05,
        }
        sendFxcmRequest(url,param)
    }

    function deleteMarketOrder() {
        var url="/trade/deleteMarketOrder.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount":701116547,
            "fxcmPosID":63825945
        }
        sendFxcmRequest(url,param)
    }

    function deleteSLMarketOrder() {
        var url="/trade/deleteSLMarketOrder.do";
        var param={
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount": 701116547,
            "orderId": 104560731,
            "type": "limit"
        }
        sendFxcmRequest(url,param)
    }

    function updateSLMarketOrder() {
        var url = "/trade/updateSLMarketOrder.do";
        var param = {
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount": 701116547,
            "orderId": 104560731,
            "type": "limit",
            "price": 1.03
        }
        sendFxcmRequest(url,param)
    }

    function createSLMarketOrder() {
        var url = "/trade/createSLMarketOrder.do";
        var param = {
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount": 701116547,
            "fxcmPosId": 63825913,
            "type": "limit",
            "price": 1.05
        }
        sendFxcmRequest(url, param)

    }

    function loginFXCM() {
        var url = "/trade/loginFXCM.do";
        var param = {
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount": 701116547,
            "fxcmPassword": 890128
        }
        sendFxcmRequest(url, param)

    }

    function deleteAllOpenPositions() {
        var url = "/trade/deleteAllOpenPositions.do";
        var param = {
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount": 701116547
        }
        sendFxcmRequest(url, param)

    }

    function createMarketOrder() {
        var url = "/trade/createMarketOrder.do";
        var param = {
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount": 701116547,
            "currency": "EUR/USD",
            "tradeSide": "sell",
            "tradeAmount": 1000,
            "tradeStop": 1.3,
            "tradeLimit": 1.02
        }
        sendFxcmRequest(url, param);
    }

    function createEntryOrder() {
        var url = "/trade/createEntryOrder.do";
        var param = {
            "userToken": "247F1A35FCA49D6443B489951AA1B877",
            "fxcmAccount": "701116547",
            "currency": "EUR/USD",
            "price": 1.1,
            "type": "limit",
            "amount": 1000,
            "side": "buy",
            "stop": 0,
            "limit": 0
        }
        sendFxcmRequest(url, param);
    }

    function sendFxcmRequest(url, param) {
        $.ajax({
            url: url,
            data: param,
            type: "post",
            success: function (result) {
                console.log(result)
            }
        })

    }
</script>